{"ast":null,"code":"import _objectSpread from \"/Users/yangpu-bt/personal/moonlt3/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nvar _jsxFileName = \"/Users/yangpu-bt/personal/moonlt3/src/routes/index.js\";\nimport React, { Component } from 'react';\nimport Loadable from 'react-loadable';\nimport { Route, Redirect, Switch } from 'react-router-dom';\nimport { getAsyncInjectors } from '../utils/asyncInjectors';\nimport queryString from 'query-string';\nimport NotFound from '../containers/NotFound';\nimport hello from './Hello';\nimport hi from './Hi';\nconst modules = {\n  menus: [hello, hi],\n  others: []\n}; // const Hello = Loadable({\n//    loader: () => import('./containers/Pages/Hello/List'),\n//    loading() {\n//      return  <div>加载中噢......</div>\n//    },\n// });\n// const Component1 = Loadable({\n//   loader: () => import('./Pages/Hello'),\n//   loading() {\n//     return <div>加载中噢......</div>\n//   },\n// });\n// 为了根据模块名称找到文件\n\nconst convFirstChartUpper = str => str.substr(0, 1).toUpperCase() + str.substr(1);\n\nexport default function CRouter(store) {\n  const _getAsyncInjectors = getAsyncInjectors(store),\n        injectReducer = _getAsyncInjectors.injectReducer,\n        injectSagas = _getAsyncInjectors.injectSagas;\n\n  return React.createElement(Switch, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 37\n    },\n    __self: this\n  }, modules.menus.map(ele => {\n    // console.log(ele);\n    const route = (ele, parentPath) => {\n      console.log(ele);\n      const elePath = ele.path ? convFirstChartUpper(ele.path) : ''; // console.log(elePath);\n\n      const finalPath = \"\".concat(parentPath || '').concat('/' + elePath);\n      console.log(\"\".concat(finalPath));\n      const Component = Loadable({\n        loader: () => import(\"../containers/Pages\".concat(finalPath)),\n\n        loading() {\n          return React.createElement(\"div\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 50\n            },\n            __self: this\n          }, \"\\u52A0\\u8F7D\\u4E2D\\u5662......\");\n        }\n\n      });\n      console.log(ele.hasReducer);\n      console.log(\"../containers/Pages\".concat(finalPath, \"/reducer\"));\n      const importModules = Promise.all([ele.hasReducer && import(\"../containers/Pages\".concat(finalPath, \"/reducer\")), ele.hasSagas && import(\"../containers/Pages\".concat(finalPath, \"/sagas\"))]);\n      importModules.then(([reducer, sagas]) => {\n        console.log(reducer);\n        reducer && injectReducer(finalPath, reducer.default);\n        sagas && injectSagas(sagas.default);\n        console.log(222);\n      });\n      return React.createElement(Route, {\n        key: ele.path,\n        exact: !(ele.child && ele.child.length > 0),\n        path: finalPath,\n        render: props => {\n          console.log(props);\n          const reg = /\\?\\S*/g; // 匹配?及其以后字符串\n\n          const queryParams = window.location.hash.match(reg); // 去除?的参数\n\n          const params = props.match.params;\n          Object.keys(params).forEach(key => {\n            params[key] = params[key] && params[key].replace(reg, '');\n          });\n          props.match.params = _objectSpread({}, params);\n\n          const merge = _objectSpread({}, props, {\n            query: queryParams ? queryString.parse(queryParams[0]) : {}\n          });\n\n          console.log(merge);\n\n          if (ele.child && ele.child.length > 0) {\n            console.log(props.match.path);\n            return React.createElement(Component, Object.assign({}, props, {\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 86\n              },\n              __self: this\n            }), React.createElement(Route, {\n              path: props.match.path,\n              exact: true,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 87\n              },\n              __self: this\n            }), ele.child.map(r => route(r, props.match.path)));\n          }\n\n          return React.createElement(Component, Object.assign({}, props, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 92\n            },\n            __self: this\n          }));\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 66\n        },\n        __self: this\n      });\n    };\n\n    return route(ele);\n  }), React.createElement(Route, {\n    render: () => React.createElement(Redirect, {\n      to: \"/404\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100\n      },\n      __self: this\n    }),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100\n    },\n    __self: this\n  }));\n}","map":{"version":3,"sources":["/Users/yangpu-bt/personal/moonlt3/src/routes/index.js"],"names":["React","Component","Loadable","Route","Redirect","Switch","getAsyncInjectors","queryString","NotFound","hello","hi","modules","menus","others","convFirstChartUpper","str","substr","toUpperCase","CRouter","store","injectReducer","injectSagas","map","ele","route","parentPath","console","log","elePath","path","finalPath","loader","loading","hasReducer","importModules","Promise","all","hasSagas","then","reducer","sagas","default","child","length","props","reg","queryParams","window","location","hash","match","params","Object","keys","forEach","key","replace","merge","query","parse","r"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport Loadable from 'react-loadable';\nimport { Route, Redirect, Switch } from 'react-router-dom';\nimport { getAsyncInjectors } from '../utils/asyncInjectors';\nimport queryString from 'query-string';\nimport NotFound from '../containers/NotFound';\n\n\nimport hello from './Hello';\nimport hi from './Hi';\nconst modules = {\n  menus: [\n    hello,\n    hi,\n  ],\n  others: []\n};\n// const Hello = Loadable({\n//    loader: () => import('./containers/Pages/Hello/List'),\n//    loading() {\n//      return  <div>加载中噢......</div>\n//    },\n// });\n// const Component1 = Loadable({\n//   loader: () => import('./Pages/Hello'),\n//   loading() {\n//     return <div>加载中噢......</div>\n//   },\n// });\n\n// 为了根据模块名称找到文件\nconst convFirstChartUpper = (str) => str.substr(0, 1).toUpperCase() + str.substr(1);\n\nexport default function CRouter(store) {\n  const { injectReducer, injectSagas } = getAsyncInjectors(store);\n  return (\n    <Switch>\n      {\n        modules.menus.map(ele => {\n            // console.log(ele);\n          const route = (ele, parentPath) => {\n            console.log(ele);\n            const elePath = ele.path ? convFirstChartUpper(ele.path) : '';\n            // console.log(elePath);\n            const finalPath = `${parentPath || ''}${'/' + elePath}`;\n            console.log(`${finalPath}`);\n            const Component = Loadable({\n              loader: () => import(`../containers/Pages${finalPath}`),\n              loading() {\n                return <div>加载中噢......</div>\n              },\n            });\n              console.log(ele.hasReducer);\n              console.log(`../containers/Pages${finalPath}/reducer`)\n              const importModules = Promise.all([\n                ele.hasReducer && import(`../containers/Pages${finalPath}/reducer`),\n                ele.hasSagas && import(`../containers/Pages${finalPath}/sagas`)\n              ])\n              importModules.then(([reducer, sagas]) => {\n                console.log(reducer);\n                reducer && injectReducer(finalPath, reducer.default);\n                sagas && injectSagas(sagas.default);\n                console.log(222);\n              })\n            return (\n              <Route\n                key={ele.path}\n                exact={!(ele.child && ele.child.length > 0)}\n                path={finalPath}\n                render={(props) => {\n                  console.log(props);\n                  const reg = /\\?\\S*/g;\n                  // 匹配?及其以后字符串\n                  const queryParams = window.location.hash.match(reg);\n                  // 去除?的参数\n                  const { params } = props.match;\n                  Object.keys(params).forEach(key => {\n                      params[key] = params[key] && params[key].replace(reg, '');\n                  });\n                  props.match.params = { ...params };\n                  const merge = { ...props, query: queryParams ? queryString.parse(queryParams[0]) : {} };\n                  console.log(merge);\n                  if ( ele.child && ele.child.length > 0 ) {\n                    console.log(props.match.path);\n                    return (\n                      <Component {...props}>\n                        <Route path={props.match.path} exact />\n                        { ele.child.map((r) => route(r, props.match.path)) }\n                      </Component>\n                    )\n                  }\n                  return <Component {...props} />\n                }}\n              />\n            )\n          }\n            return route(ele);\n          })\n      }\n      <Route render={() => <Redirect to=\"/404\"  />} />\n    </Switch>\n  );\n}"]},"metadata":{},"sourceType":"module"}