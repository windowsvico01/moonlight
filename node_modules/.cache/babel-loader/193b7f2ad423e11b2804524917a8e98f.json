{"ast":null,"code":"import _objectSpread from \"/Users/yangpu-bt/personal/moonlt3/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nvar _jsxFileName = \"/Users/yangpu-bt/personal/moonlt3/src/routes/index.js\";\nimport React, { Component } from 'react';\nimport Loadable from 'react-loadable';\nimport { Route, Redirect, Switch } from 'react-router-dom';\nimport queryString from 'query-string';\nimport hello from './Hello';\nimport hi from './Hi';\nconst modules = {\n  menus: [hello, hi],\n  others: []\n}; // const Hello = Loadable({\n//    loader: () => import('./containers/Pages/Hello/List'),\n//    loading() {\n//      return  <div>加载中噢......</div>\n//    },\n// });\n// const Component1 = Loadable({\n//   loader: () => import('./Pages/Hello'),\n//   loading() {\n//     return <div>加载中噢......</div>\n//   },\n// });\n// 为了根据模块名称找到文件\n\nconst convFirstChartUpper = str => str.substr(0, 1).toUpperCase() + str.substr(1);\n\nexport default class CRouter extends Component {\n  // 关于权限部分先不写\n  render() {\n    return React.createElement(Switch, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 38\n      },\n      __self: this\n    }, modules.menus.map(ele => {\n      // console.log(ele);\n      const route = (ele, parentPath) => {\n        // console.log(ele);\n        const elePath = ele.path ? convFirstChartUpper(ele.path) : ''; // console.log(elePath);\n\n        const finalPath = \"\".concat(parentPath || '').concat('/' + elePath);\n        console.log(\"\".concat(finalPath));\n        const Component = Loadable({\n          loader: () => import(\"../containers/Pages\".concat(finalPath)),\n\n          loading() {\n            return React.createElement(\"div\", {\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 51\n              },\n              __self: this\n            }, \"\\u52A0\\u8F7D\\u4E2D\\u5662......\");\n          }\n\n        });\n        return React.createElement(Route, {\n          key: ele.path,\n          exact: ele.child && ele.child.length > 0 ? true : false,\n          path: finalPath,\n          render: props => {\n            console.log(props);\n            const reg = /\\?\\S*/g; // 匹配?及其以后字符串\n\n            const queryParams = window.location.hash.match(reg); // 去除?的参数\n\n            const params = props.match.params;\n            Object.keys(params).forEach(key => {\n              params[key] = params[key] && params[key].replace(reg, '');\n            });\n            props.match.params = _objectSpread({}, params);\n\n            const merge = _objectSpread({}, props, {\n              query: queryParams ? queryString.parse(queryParams[0]) : {}\n            });\n\n            console.log(merge);\n\n            if (ele.child && ele.child.length > 0) {\n              console.log(props.match.path);\n              return React.createElement(Component, Object.assign({}, props, {\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 75\n                },\n                __self: this\n              }), ele.child.map(r => route(r, props.match.path)));\n            }\n\n            return React.createElement(Component, Object.assign({}, props, {\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 80\n              },\n              __self: this\n            }));\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 55\n          },\n          __self: this\n        });\n      };\n\n      return route(ele);\n    }), React.createElement(Route, {\n      render: () => React.createElement(Redirect, {\n        to: \"/404\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89\n        },\n        __self: this\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89\n      },\n      __self: this\n    }));\n  }\n\n}","map":{"version":3,"sources":["/Users/yangpu-bt/personal/moonlt3/src/routes/index.js"],"names":["React","Component","Loadable","Route","Redirect","Switch","queryString","hello","hi","modules","menus","others","convFirstChartUpper","str","substr","toUpperCase","CRouter","render","map","ele","route","parentPath","elePath","path","finalPath","console","log","loader","loading","child","length","props","reg","queryParams","window","location","hash","match","params","Object","keys","forEach","key","replace","merge","query","parse","r"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport Loadable from 'react-loadable';\nimport { Route, Redirect, Switch } from 'react-router-dom';\nimport queryString from 'query-string';\n\n\nimport hello from './Hello';\nimport hi from './Hi';\nconst modules = {\n  menus: [\n    hello,\n    hi,\n  ],\n  others: []\n};\n// const Hello = Loadable({\n//    loader: () => import('./containers/Pages/Hello/List'),\n//    loading() {\n//      return  <div>加载中噢......</div>\n//    },\n// });\n// const Component1 = Loadable({\n//   loader: () => import('./Pages/Hello'),\n//   loading() {\n//     return <div>加载中噢......</div>\n//   },\n// });\n\n// 为了根据模块名称找到文件\nconst convFirstChartUpper = (str) => str.substr(0, 1).toUpperCase() + str.substr(1);\n\nexport default class CRouter extends Component {\n  // 关于权限部分先不写\n\n  render() {\n    \n    return (\n      <Switch>\n        {\n            modules.menus.map(ele => {\n              // console.log(ele);\n            const route = (ele, parentPath) => {\n              // console.log(ele);\n              const elePath = ele.path ? convFirstChartUpper(ele.path) : '';\n              // console.log(elePath);\n              const finalPath = `${parentPath || ''}${'/' + elePath}`;\n              console.log(`${finalPath}`);\n              const Component = Loadable({\n                loader: () => import(`../containers/Pages${finalPath}`),\n                loading() {\n                  return <div>加载中噢......</div>\n                },\n              });\n              return (\n                <Route\n                  key={ele.path}\n                  exact={(ele.child && ele.child.length > 0) ? true : false }\n                  path={finalPath}\n                  render={(props) => {\n                    console.log(props);\n                    const reg = /\\?\\S*/g;\n                    // 匹配?及其以后字符串\n                    const queryParams = window.location.hash.match(reg);\n                    // 去除?的参数\n                    const { params } = props.match;\n                    Object.keys(params).forEach(key => {\n                        params[key] = params[key] && params[key].replace(reg, '');\n                    });\n                    props.match.params = { ...params };\n                    const merge = { ...props, query: queryParams ? queryString.parse(queryParams[0]) : {} };\n                    console.log(merge);\n                    if ( ele.child && ele.child.length > 0 ) {\n                      console.log(props.match.path);\n                      return (\n                        <Component {...props}>\n                          { ele.child.map((r) => route(r, props.match.path)) }\n                        </Component>\n                      )\n                    }\n                    return <Component {...props} />\n                  }}\n                />\n              )\n            }\n              return route(ele);\n            })\n        }\n        \n        <Route render={() => <Redirect to=\"/404\" />} />\n      </Switch>\n    )\n  }\n}"]},"metadata":{},"sourceType":"module"}